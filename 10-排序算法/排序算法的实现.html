<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // 创建列表类
        function arryList(){
            // 属性
            this.array = []

            // 方法
            // 1.将数据可以插入到数组中的方法
            arryList.prototype.insert = function(item){
                this.array.push(item)
            }
            // 2.toString
            arryList.prototype.toString = function(){
                return this.array.join('-')
            }
            // 3.交换数据的抽取
            arryList.prototype.swap = function(m,n){
                let temp = this.array[m]
                this.array[m] = this.array[n]
                this.array[n] = temp
            }

            // 排序算法的封装
            // 冒泡排序
            arryList.prototype.bubbleSort = function(){
                // 1.获取数组长度
                let length = this.array.length
                // 循环
                for(let j = length - 1; j >= 0; j--){
                    for(let i = 0; i < j; i++){
                        if(this.array[i] > this.array[i+1]){
                            this.swap(i,i+1)
                        }
                    }
                }
            }


            // 选择排序
            arryList.prototype.selectionSort = function(){
                // 1.获取数组的长度
                let length = this.array.length
                // 开始排序
                for(let j = 0; j < length-1; j++){
                    let min = j
                    for(let i = min+1; i < length; i++){
                        if(this.array[min] > this.array[i]){
                            min = i
                        }
                    }
                    this.swap(min,j)
                }

            }

            // 插入排序
            arryList.prototype.insertionSort = function(){
                // 1、获取数组长度
                let length = this.array.length
                // 2.开始排序
                for(let i = 1; i < length; i++){
                    let temp = this.array[i]
                    let j = i
                    while(this.array[j-1] > temp && j > 0){
                        this.array[j] = this.array[j-1]
                        j--
                    }
                    this.array[j] = temp
                }
            }

            // 希尔排序
            arryList.prototype.shellSort = function(){
                // 1.获取数组的长度
                let length = this.array.length
                // 2.初始化增量
                let gap = Math.floor(length / 2)
                // 3.循环（gap不断减少）
                while(gap >= 1){
                    // 4.以gap作为分隔进行分组,对各分组进行插入排序
                    for(let i = gap; i < length; i++){
                        let temp = this.array[i]
                        let j = i
                        while(this.array[j-gap] > temp && j > gap - 1){
                            this.array[j] = this.array[j-gap]
                            j -= gap
                        }
                        // 5.将j位置的元素赋值给temp
                        this.array[j] = temp
                    }
                    // 增量变化
                    gap = Math.floor(gap / 2)
                }
            }

            // 快速排序
            // 1.确定选择枢纽代码实现
            //（目的就是选择中间的枢纽，并调整顺序，将其放到倒数第二个位置）
            arryList.prototype.median = function(left,right){
                // 1.取出中间位置
                let center = Math.floor((left + right) / 2)
                // 2.判断大小，并且进行交换
                if(this.array[left] > this.array[center]){
                    this.swap(left,center)
                }
                if(this.array[center] > this.array[right]){
                    this.swap(center,right)
                }
                if(this.array[left] > this.array[right]){
                    this.swap(left,right)
                }
                // 3.将center换到right-1的位置
                this.swap(center,right-1)
                return this.array[right-1]
            }
            
            // 2.快速排序代码实现
            arryList.prototype.quickSort = function(){
                this.quick(0,this.array.length-1)
            }

            // 3.使用到的递归函数
            arryList.prototype.quick = function(left,right){
                // 1.结束条件
                if(left >= right) return
                // 2.获取枢纽
                let pivot = this.median(left,right)
                // 3.定义变量，用来记录找到的位置
                let i = left
                let j = right -1
                // 4.开始进行交换
                while(true){
                    while(this.array[++i] < pivot){}
                    while(this.array[--j] > pivot){
                        if(i < j){
                            this.swap(i,j)
                        }else{
                            break
                        }
                    }
                }
                // 6.将枢纽放置在正确的位置 也就是i的位置
                this.swap(i,right-1)
                // 7.分而治之
                this.quick(left,i-1)
                this.quick(i+1,right)
            }

        }


        // 测试
        let list = new arryList()
        list.insert(1)
        list.insert(22)
        list.insert(13)
        list.insert(74)
        list.insert(35)
        list.insert(6)
        list.insert(77)
        list.insert(58)
        // console.log(list.toString());

        // list.bubbleSort()
/*         console.log(list);
        // list.selectionSort()
        console.log(list);
        list.insertionSort()
        console.log(list); */

/*         list.shellSort()
        alert(list) */

        list.quickSort()
        alert(list)

    </script>
</body>
</html>